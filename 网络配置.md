<b id='t'></b>

# :jack_o_lantern:网络配置，进程，服务管理 #

***

:arrow_double_down:[网络配置与命令](#a1)

:arrow_double_down:[使用nmcli管理配置](#a2)

:arrow_double_down:[Linux服务](#a3)

:arrow_double_down:[Linux性能监控](#a4)

:arrow_double_down:[Linux进程监控与管理](#a5)

***

<b id='a1'></b>

### :beginner:网络配置与命令 ###

:arrow_double_up:[返回目录](#t)

**:one:CentOS7与网络有关的文件：**

```
/etc/sysconfig/network-scripts/ifcfg-****   网卡配置文件(***代表网卡名称标识)

服务器：ifcfg-eth0，虚拟机：ifcfg-ens33

/etc/resolv.conf 设置DNS客户端的文件，指定DNS服务器

/etc/hosts       保存主机名和IP地址映射的静态文件，本地DNS解析
```

**:two:常用网络命令回顾**

```
·ip         查看ip
·ping       查看网络连通性
·netstat    联网状态
·hostname   查看或设置当前主机名
·hostnamectl查看主机名和相关系统信息
·route      查看或设置路由表
·traceroute 查看当前主机到目的主机经过的节点
```

**:three:	域名查询命令**

`dig[@server][FQDN][type]`

说明：

type：预设是查询A记录，可以在这里写入其他的记录如：MX，NS记录等

命令安装：#yum-yinstall bind-utils

示例：

```
dig www.crs811.com                #dig最基本的用法
dig zx.xmgd.com.AXFR              #用dig查看zone数据传输
dig zx.xmgd.com.IXFR=N            #用dig查看zone数据的增量传输
dig-x210.52.83.228                #用dig查看反向解析
dig xmgd.com.+nssearch            #查找一个域的授权dns服务器
dig xmgd.com +trace               #从根服务器开始追踪一个域名的解析过程
dig yahoo.com MX +noall +answer   #查找yahoo.com MX记录的列表
```

**:four:配置以太网接口文件**

编辑网卡配置文件：`#vim/etc/sysconfig/network-scripts/ifcfg-ens33`  类容如下：

![](https://github.com/Lumnca/Linux/blob/master/Img/a23.png)

```
BOOTPROTO=dhcp                 #设置网卡获得ip地址的方式，可能的选项为static，dhcp，bootp或none分别对应静态指定的ip地址，通过dhcp协议获得的ip地址，通过bootp协议获得的ip地址

DEVICE=ens33                   #描述网卡对应的设备别名
ONBOOT=yes                     #开启自动启用网络连接
DNS1=8.8.8.8                   #设置主DNS，默认覆盖resolv.conf
DNS2=8.8.8.8                   #设置从DNS
```

如果你想将IP设置为静态IP地址，就需要修改如下配置：

```
BOOTPROTO=static              （静态IP）设置项：
BROADCAST=192.168.0.255         #对应的子网广播地址
IPADDRO=202.115.195.254          #设置静态
NETMASK=255.255.255.0           #设置静态IP的掩码
GATEWAYO=202.115.195.1          #设置网关
```

**:five:配置DNS设置文件**

打开配置文件：`#vim/etc/resolv.conf`

![](https://github.com/Lumnca/Linux/blob/master/Img/a24.png)

其中下面一行可以设置DNS服务器的IP地址。

`#systemctl restart network` 所有配置都需要重新启动网络之后才能生效

***

<b id='a2'></b>

### :beginner:使用nmcli管理配置 ###

:arrow_double_up:[返回目录](#t)

`nmcli loption]object{command I help}`

用途：代替以前的ifconfig命令

* device（设备）操作-配置当前的网络接口（网卡），如ip，dns等connection（连接）操作-对单一的设备设置多个连接，并在连接之间切换，同一时间只有一个连接配置生效，作用是针对一个网络接口可设置多个网络连接，比如静态IP和动态IP，再根据需要打开（up）相应的连接

查看网络连接`nmcli con[show]` 如：

![](https://github.com/Lumnca/Linux/blob/master/Img/a25.png)

查看设备状态` nmcli dev[show/status]`:

># nmcli device show ens33

**:one:连接设备配置操作：**

```
nmcli con add/modify/del con-name“name”type"“type” ifname“ifname”[autoconnect no]

--参数
con add/modify/del  添加/修改/删除连接
con-name            连接名
type                设备类型
ifname              接口名
autoconnect no      禁止开机自动启动

打开/关闭连接
nmcli con up/down con-name
```

**:two:同一网卡配置多IP：**

添加/删除IP：  +/-   ipv4.address

>#nmcli con modify ens33 +ipv4.address '192.168.10.122/24' 如下图示例：

![](https://github.com/Lumnca/Linux/blob/master/Img/a26.png)

注意要重启网络服务才有效。

**:three:nmcli 修改DNS**

同样的操作还可以修改DNS：

添加/删除DNS：+/-ipv4.dns ：

>#nmcli con mod ens33 +ipv4.dns 8.8.8.8

添加/删除网关：+/-ipv4.gateway:

>nmcli connection modify ens33 +ipv4.gateway 10.10.1.1

****

**:four:修改 host name两种方式**

* 1、注销生效：`#hostname centos`
* 2、永久生效：`#nmcli general hostname my-hostname`

***

<b id='a3'></b>

### :beginner:Linux服务 ###

:arrow_double_up:[返回目录](#t)

**service**

* service是一直运行在后台的程序
* 一般随系统的启动自动地启动且在用户logoff后仍然能够继续运行。

**daemon**

* 与运行的service对应的程序，一般称其为daemon（后台进程）
* 注：在Unix中常以“d”作为系统守护进程的后缀标识·如：httpd，firewalld，systemd等

**:one:Systemd**

Systemd并不是一个命令，而是一组命令，涉及系统管理的方方面面

```

systemctlSystemd     的主命令，用于管理系统
systemd-analyze      命令用于查看服务启动耗时
hostnamectl          用于查看当前主机的信息
localectl            用于查看本地化设置
timedatectl          用于查看当前时区设置1oginctl用于查看当前登录的用户
```

**:one:Systemd使用**

systemctl是systemd中最常用的命令执行工具，整合了chkconfig与service功能于一体，systemctl命令的基本操作格式：

>#systemctl 动作 服务名

systemctl常见动作：

* systemctl            列出正在运行的服务状态
* systemd-cgls         以树形列出正在运行的进程
* start                启动
* stop                 停止
* restart              重新启动
* status               运行状态
* enable               设置开机启动
* disable              禁止开机启动
* is-enabled           查看服务是否开机启动

示例：

```
#systemctl restart network     重启network服务

#systemctl start httpd         开启httpd服务
```

***

<b id='a4'></b>

### :beginner:Linux性能监控 ###

:arrow_double_up:[返回目录](#t)

查看登陆用户的系统行为: `#w`

查看系统当前的在线用户: `#who`

查看曾经登陆过系统的用户: `#last[用户名]`

cpu性能的监视 : `#top`    ----显示目前占用CPU时间最多的进程，并不断的进行实时刷新

内存性能的监视: `#free`   `#free-s 3  //指定时间间隔进行持续监视`

`#mstat`  `#vmstat 33//分别制定采样间隔和采样次数`


**磁盘I/O性能的监视**

`#iostat` 此命令需要安装软件包

系统性能的优化

* 提升与调整内核
* 调整文件系统
* 优化磁盘I/O性能

**Linux 进程类型:**

交互进程:由shell启动的进程，既可以在前台运行，也可以在后台运行

批处理进程:和终端没有关系，是一个进程序列

守护进程:系统启动时伴随启动的进程，在后台运行,通常是Linux中的某项服务，如httpd（www）、ftp、dns等等

***

<b id='a5'></b>

### :beginner:Linux进程监控与管理 ###

:arrow_double_up:[返回目录](#t)

Centos上进程有5种状态：
·1.运行（正在运行或在运行队列中等待）
·2.中断（休眠中，受阻，在等待某个条件的形成或接受到信号）
·3.不可中断（收到信号不唤醒和不可运行，进程必须等待直到有中断发生）
·4.僵死（进程已终止，但进程描述符存在，直到父进程调用wait4（）系统调用后释放）
·5.停止（进程收到SIGSTOP，SIGSTP，SIGTIN，SIGTOU信号后停止运行运行）







