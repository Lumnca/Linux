<b id="t"></b>

# :gem:用户和用户组管理 #

***

:arrow_down:[基本信息](#a1)

:arrow_down:[用户操作基本命令](#a2)

***

<b id="a1"></b>

### :trophy:基本信息 ###

:arrow_up:[返回目录](#t)

**用户类型**

* 系统管理员（root账户）
* 普通用户：系统内建用户，自定义用户

**用户组**

* 用户私有组
* 系统默认组
* 普通用户组

**UID/GID**

Linux系统不认识“账号”，Linux系统靠ID识别用户，用户ID是：UID，用户组ID是：GID

>ID是一个数字，账号是为了让使用者记忆方便

>ID与账号的对应关系：/etc/passwd

>ps:ID与账号不一定永远一致，删除账号会释放ID给下一账号

**:one:用户类型**

* 1、系统管理员：

`即root账户，UID为0,root拥有系统中的最高权限,root能访问并修改任何用户的文件与目录，无论其是何权限设置`

* 2、系统内建用户：

`linux为满足自身系统管理、保障系统运行所内建的账号由系统自动创建，不能用于登录操作系统（/sbin/nologin）,UID在1-499之间`

3、自定义用户：

`由root管理员创建供用户登录系统进行操作使用的账号默认UID>500类似于Windows系统中users每个自定义用户都有一个账户，包括用户名、密码和主目录（默认主目录位置：/home/username）等。提示符为$`

`每个自定义用户有自己的权限，在权限许可的范围内进行工作普通用户只有修改以下三个目录的权限：`

```
/home/username
/var/tmp
/tmp
```

Linux系统部分内建账号：

|用户名称|用户ID|组D|主目录|使用的shell|
|:--|:---------|:--|:----|:-----------|
|root |0|0|/root |/bin/bash|
|bin |1 |1 |/bin |/sbin/nologin|
|daemon |2 |2|/sbin |/sbin/nologin|
|adm |3|4|/var/adm |/sbin/nologin|
|1p |4|7|/var/spool/lpd |/sbin/nologin|
|sync |5 |0|/sbin |/bin/sync|
|shutdown|6 |0|/sbin |/sbin/shutdown|
|halt |7 |o|/sbin |/sbin/halt|
|mail |8|12|/var/spool/mail |/sbin/nologin|
|news |9 |13|/etc/news|
|uucp 10|14 |/var/spool/uucp/sbin/nologin|
|operator 11 |0 |/root |/sbin/nologin|

**:two:与用户管理相关的文件**

* /etc/passwd             #用户的配置文件；
* /etc/shadow             #用户影子口令文件；
* /etc/login.defs         #设置普通用户账号限制的文件
* /etc/default/useradd    #当使用useradd添加用户时，根据此文件中定义的规则来执行操作；

**/etc/passwd**

包含所有用户的基本信息，对所有用户可读

每个用户信息占一行,数据保存格式：

`username : pwd : uid : gid : comment : home : loginshell `

数据保存格式详细文档：#man 5 passwd

在root下我们可以查看用户的信息：`#cat /etc/passwd`，如下图：

![](https://github.com/Lumnca/Linux/blob/master/Img/a13.png)

/etc/passwd数据保存格式字段详解：

1.用户名

2.密码（已经加密）

3.UID（用户标识），操作系统自己用的

4.GID组标识

5.用户全名或本地帐号

6.开始目录

7.登录使用的Shell，就是对登录命令进行解析的工具

**/etc/shadow**

影子密码文件，因passwd文件对所有人可读，为安全创建此文件启用影子密码时，此文件用于存放系统内用户加密后的密码和用户登录控制信息
普通用户无法读取该文件，只有root用户才能读取该文件每个用户信息占用一行

数据保存格式：
`username : pwd : lastchanged : minimum : maximum：alert：字段7：字段8：字段9`

数据保存格式详细文档：#man 5 shadow

/etc/shadow数据保存格式字段详解：

1.帐号名称

2.密码：这里是加密过的，但高手也可以解密的（！标识该帐号用来登录）

3.自1/1/1970起，密码被修改的天数

4.密码不可被变更的天数

5.密码需要被重新变更的天数（99999表示不需要变更）

6.密码变更前提前几天警告

7.帐号失效日期

8.帐号取消日期

9.保留条目，目前没用

**/etc/login.defs**

定义了与用户创建和密码管理相关的参数，其内容如下：

```
MAIL_DIR  /var/spool/mail #指定邮件目录
PASS_MAX_DAYS 99999       #密码最大有效期
PASS_MIN_DAYS 0           #两次修改密码的最小间隔
PASS_MIN_LEN 5            #密码最小长度对于root无效
PASS_WARN_AGE 7           #密码过期前多少天开始提示
UID_MIN 500               #用户ID的最小值
UID_MAX60000              #用户ID的最大值
GID_MIN 500               #组ID的最小值
GID_MAX60000              #组ID的最大值
CREATE_HOME yes           #使用useradd的时候创建用户目录
```

**/etc/default/useradd**

当使用useradd添加用户时，根据此文件中定义的规则来文执行操作；

#useradd defaults file内容：

```
GROUP=100
HOME=/home/          把用户的主目录建在/home中；
INACTIVE=-1          是否启用账号过期停权，-1表示不启用；
EXPIRE=              账号终止日期，不设置表示不启用；
SHELL=/bin/bash      所用SHELL的类型；
SKEL=/etc/skel       建立新用户时，用于初始化用户根目录。系统会将此目录下的所有文件、目录都复制到新建用户的根目录，并且将用户属主与用户组调整为与此根目录相同
```


<b id="a2"></b>

### :trophy:用户基本操作 ###

:arrow_up:[返回目录](#t)













