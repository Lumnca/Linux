<b id="t"></b>

# :gem:vi与vim的使用 #

***

:arrow_down:[vi介绍](#a1)

:arrow_down:[vi使用](#a2)


***

<b id="a1"></b>

### :trophy:vi介绍 ###

:arrow_up:[返回目录](#t)

**:one:vi是什么？**

>vi是由加州大学伯克利分校BillJoy开发的文本编辑器vi只能是编辑字符，不能编辑字体或对段落进行排版vi没有菜单，只有命令

vi的设计目的

>不使用鼠标，方便快速的编辑文本

**:two:为何学习vi？**

* vi编辑器是所有Unix及Linux系统下内嵌的标准编辑器
* 在Unix、Linux下命令都相同
* 文本编辑器（没有排版功能、处理纯文本字符）
* 语法高亮、具备编程能力（配置：/etc/man_db.conf）
* 响应速度快，适合远程终端访问修改文件

**:three:	vi的特点**

* 文本编辑器，处理纯文本字符，不能排版
* 全屏编辑文本
* 命令模式，没有菜单

**:four:vi的三种状态**

vi的工作状态分为三种模式

**命令模式（command mode）输入命令**
 - 控制屏幕光标的移动；字符、字或行的删除
 - 注意：命令不回显
 
**插入模式（insert mode）：编辑文档**
 - 文字输入、各种编辑 
 
**末行模式（last line mode）：末行命令模式**
 - 文件保存或退出
 - 设置编辑环境，如寻找字符串、列出行号……等

**:five:切换详细说明**

（1）在操作系统提示符下键入vi，默认进入命令模式

（2）由命令模式进入输入方式，键入编辑命令，如：插入命令i

（3）由命令模式进入末行模式，只需键入冒号（：），每次只执行一条，执行完毕立即回到命令模式

（4）其他模式按ESC键，可回到命令模式。

（5）编辑模式和末行模式之间不能直接切换，须通过命令模式。

***

<b id="a2"></b>

### :trophy:vi使用 ###

:arrow_up:[返回目录](#t)

**:one:进入vi（两种方法）**

**#vi[path]filename**

编辑一个新文件或已经存在的文件的方法

若filename不存在，则系统会创建一个名为filename的文件

若filename存在，系统会把文件的内容读入vi使用的缓冲区进行编辑

**#vi**

编辑新的文件-内存中

在编辑完成后必须用相关命令保存文件，否则一切编辑都无效.

**:two:编辑文件**

* 1、进入编辑模式：键入i，准备编辑文本，下方显示--INSERT--

* 2、正常编辑

**[保存]退出**

* 1、进入命令模式：按“ESC”回到命令模式
* 2、输入命令：ZZ（保存退出），ZQ（不保存退出）

**退出vi**

* 方式1：进入命令模式，输入退出命令：ZZ（保存退出），ZQ（直接退出）

* 方式2：进入末行模式，用命令退出：q（直接退出），q！（强制退出），wq（保存退出）

**:three:基本使用**

**1.行号、光标等设置**

显示行号

末行模式下：

>a:set number或:set nu

**2.移动光标**

光标可移动的单位如下：

* （1）字符
* （2）行
* （3）屏幕：半个屏幕高或整个屏幕（4）行首和行尾
* （5）字
* （6）句：以逗号、句号、问号、感叹号结尾且后面有二个及以上空格或一个换行符的字符序列。
* （7）段：以一个空白行开始和结束的字符序列

**3.字符移动**

字符移动

* （1）方向键
* （2）k、j、h、1：各自按上、下、左、右移动一个字符

**4.行移动**

0或Home：光标移动到本行行首

$或End：光标移动到本行行尾

**5.跳到指定的行**

[行号]G或者[行号]gg：转到行号位置，如跳转到低3行：

>3G  3gg

G：转到文件最后一行

gg：转到文件第一行

**6.屏幕滚动**

* ctrl+u将屏幕向文件头方向翻滚半屏
* ctrl+d将屏幕向文件尾方向翻滚半屏
* ctrl+f将屏幕向文件尾方向翻滚一整屏
* ctrl+b将屏幕向文件头方向翻滚一整屏

**:four:文本操作**

**1、文本插入**

进入文本编辑方式：

i插入当前字符前

I插入当前行头

a插入当前字符后

A插入当前行尾

o插入当前行下一行

O插入当前行上一行

**2、文本删除**

dd：删除当前行

ndd：删除从当前行起的n行

x：删除光标处的字符

nx：删除光标位置起的右n个字符

X：删除光标前的字符

nX：删除光标位置前的左n个字符

D或d$：删除光标起到行尾的内容

d0：删除光标前一个字符到行首的内容

dw：删除一个单词

ndw：删除n个单词

**3、恢复**

u：取消上一次的编辑动作（可多次）

U：取消在本行所有的编辑动作

重复命令（.）：再一次执行刚执行过的命令

**4、修改文本**

cobject：改变光标位置起到object位置的内容.

C或c$：改变光标位置起到行尾的内容.

nC：改变光标位置起的n行内容

cc：改变当前行的内容.

ncc：改变当前行起n行的内容

5、文本的搜索与替换

搜索：/word 查找word

1、命令模式下键入/键，在窗口底部显示符号/，在光标处键入待搜索字符串，按回车从光标当前位置向下搜索字符串

2、命令模式下键入？键，从光标当前位置向上搜索字符串查找命令

n：继续向前查找（/和？方向不同）

示例：

```
/sd    像光标后搜索sd
?sd    像光标前搜索sd

命令模式下按n，可以查看其他匹配项
```

**文本替换**

文本替换是用新的文本替换原有的文本

s和S命令：

s：用跟随在其后的字符串替换光标位置的字符

ns：用跟随在其后的字符串替换光标位置起的n个字符

S：用跟随在其后的字符串替换当前行

nS：用跟随在其后的字符串替换当前行起的n行

/g全局操作

示例：

![](https://github.com/Lumnca/Linux/blob/master/Img/a9.png)

如上替换光标所在的行第一个kay为sss：`s:/kay /sss/`

替换当前行所有的kay为为sss： `s:/kay /sss /g`

替换第2行到最后一行的所有的b为B： `:2,$s/b /B /g`

替换每一行的B为b： `:%s/B /b /g`

**7、拷贝文本**

命令模式：第一步：拷贝

拷贝一行（从当前行）：yy nyy：表示拷贝从光标所在的该行“往下数”n行文字

第二步：粘贴

将光标移到目标位置，按命令p

**8、文本块快速处理**

VISUAL BLOCK（文本块处理功能-批量注释、删除）命令模式下输入：ctrl+v

底部显示为--VISUAL BLOCK-

然后移动光标（按e快速移动下个单词，按快速移动到行尾）

* 插入I
* 复制y
* 剪切（删除）d
* 粘贴p

**9、执行shell命令（末行模式）在vi中执行shell命令：**

：lcommand（不离开vi执行一条shell命令）

：rlcommand（将command执行的结果放到当前行之后）


例：

`：！date#在屏幕底端显示当前日期时间`

`：r！date#将日期和时间写入正编辑文件当前行下一行`


***

<b id="a3"></b>

### :trophy:vim使用 ###

:arrow_up:[返回目录](#t)

vim相比vi的优点：

1、多级撤消：在vi里，按u只能撤消上次命令，在vim里可以无限制的撤消

2、易用性：vi只能运行于unix，而vim可以运行于unix，windows，mac等多平台

3、语法加亮：vim可以用不同的颜色来加亮你的代码

4、可视化操作：vim不仅可以在终端运行，也可以运行于xwindow、mac os、windows

5、对vi的完全兼容：某些情况下，你可以把vim当成vi来使用

对于有些liunx没有vim命令说明没有安装vim，可以自行安装：

`#yum  install vim`

vim的使用与vi一致。

对于vim还有他的配置文件：`/etc/vimc`















